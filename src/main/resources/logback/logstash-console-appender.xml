<included>

    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder class="net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder">
            <providers>
                <timestamp>
                    <pattern>yyyy-MM-dd HH:mm:ss.SSS</pattern>
                </timestamp>
                <pattern>
                    <!-- 비어있는 필드 생략, Default: false -->
                    <!--<omitEmptyFields>true</omitEmptyFields>-->
                    <pattern>
                        {
                            "pid": ${PID:-},
                            "thread": "%thread",
                            "trace_id": "%X{traceId}",
                            "span_id": "%X{spanId}",
                            "level": "%level",
                            "app_name": "${APP_NAME}",
                            "app_version": "${APP_VERSION}",
                            "logger": "%logger.%M\\(%line\\)",
                            <!-- "message": "%replace(%message){'[a-zA-Z0-9]+[a-zA-Z0-9\\._-]*@[a-zA-Z0-9_-]+[a-zA-Z0-9\\._-]+', '*****@***.***'}" -->
                            "message": "%message"
                        }
                    </pattern>
                </pattern>
                <stackTrace/>
                <!--<stackTrace>-->
                <!--    <fieldName>stack_trace</fieldName>-->
                <!--    <throwableConverter class="net.logstash.logback.stacktrace.ShortenedThrowableConverter">-->
                <!--        <maxDepthPerThrowable>50</maxDepthPerThrowable>-->
                <!--        <shortenedClassNameLength>30</shortenedClassNameLength>-->
                <!--        <exclude>sun.*</exclude>-->
                <!--        <exclude>java.lang.reflect.*</exclude>-->
                <!--    </throwableConverter>-->
                <!--</stackTrace>-->
            </providers>
            <jsonGeneratorDecorator class="net.logstash.logback.mask.MaskingJsonGeneratorDecorator">
                <valueMasker class="com.silvercall.logback.mask.MessageValueMasker"/>
            </jsonGeneratorDecorator>
        </encoder>
    </appender>
</included>
